<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nilorea Library: include/nilorea/n_str.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.2 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>include/nilorea/n_str.h</h1>  </div>
</div>
<div class="contents">
<a href="n__str_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/**\file n_str.h</span>
<a name="l00002"></a>00002 <span class="comment"> *  N_STR and string function declaration</span>
<a name="l00003"></a>00003 <span class="comment"> *\author Castagnier Mickael</span>
<a name="l00004"></a>00004 <span class="comment"> *\version 2.0</span>
<a name="l00005"></a>00005 <span class="comment"> *\date 05/02/14</span>
<a name="l00006"></a>00006 <span class="comment"> */</span>
<a name="l00007"></a>00007 
<a name="l00008"></a>00008 <span class="preprocessor">#ifndef N_STRFUNC</span>
<a name="l00009"></a>00009 <span class="preprocessor"></span><span class="preprocessor">#define N_STRFUNC</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00011"></a>00011 <span class="comment">/*! list of evil characters */</span>
<a name="l00012"></a><a class="code" href="n__str_8h.html#af5664579c33748b46f6244d8060da42b">00012</a> <span class="preprocessor">#define BAD_METACHARS &quot;%/-+&amp;;`&#39;\\\&quot;|*?~&lt;&gt;^()[]{}$\n\r\t &quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor"></span>
<a name="l00014"></a>00014 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">&quot;C&quot;</span>
<a name="l00016"></a>00016 {
<a name="l00017"></a>00017 <span class="preprocessor">#endif</span>
<a name="l00018"></a>00018 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00019"></a>00019 <span class="comment">                /**\defgroup N_STR N_STR: replacement to char *strings with dynamic resizing and boundary checking</span>
<a name="l00020"></a>00020 <span class="comment">                  \addtogroup N_STR </span>
<a name="l00021"></a>00021 <span class="comment">                  @{</span>
<a name="l00022"></a>00022 <span class="comment">                  */</span>
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="preprocessor">#ifdef LINUX</span>
<a name="l00025"></a>00025 <span class="preprocessor"></span><span class="preprocessor">#ifndef _XOPEN_SOURCE</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="comment">                /*! posix extension */</span>
<a name="l00027"></a>00027 <span class="preprocessor">#define _XOPEN_SOURCE 500</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00029"></a>00029 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;stdio.h&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;stdlib.h&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;string.h&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;strings.h&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;math.h&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;fcntl.h&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;unistd.h&gt;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="preprocessor">#include &quot;<a class="code" href="n__list_8h.html">n_list.h</a>&quot;</span>
<a name="l00041"></a>00041 <span class="comment"></span>
<a name="l00042"></a>00042 <span class="comment">                /*! local strdup */</span>
<a name="l00043"></a><a class="code" href="group___n___s_t_r.html#ga16762ce4107cf926d2dc561b150333a0">00043</a> <span class="preprocessor">#define local_strdup( __src_ )\</span>
<a name="l00044"></a>00044 <span class="preprocessor">                ({ \</span>
<a name="l00045"></a>00045 <span class="preprocessor">                 char *str = NULL ;\</span>
<a name="l00046"></a>00046 <span class="preprocessor">                 int len = strlen( (__src_) );\</span>
<a name="l00047"></a>00047 <span class="preprocessor">                 Malloc( str , char , len + 5 );\</span>
<a name="l00048"></a>00048 <span class="preprocessor">                 if( !str )\</span>
<a name="l00049"></a>00049 <span class="preprocessor">                 { \</span>
<a name="l00050"></a>00050 <span class="preprocessor">                 n_log( LOG_ERR , &quot;Couldn&#39;t allocate %d byte for duplicating \&quot;%s\&quot;&quot; , (__src_) );\</span>
<a name="l00051"></a>00051 <span class="preprocessor">                 }\</span>
<a name="l00052"></a>00052 <span class="preprocessor">                 else\</span>
<a name="l00053"></a>00053 <span class="preprocessor">                 {\</span>
<a name="l00054"></a>00054 <span class="preprocessor">                 for( int it = 0 ; it &lt;= len ; it ++ )\</span>
<a name="l00055"></a>00055 <span class="preprocessor">                 {\</span>
<a name="l00056"></a>00056 <span class="preprocessor">                 str[ it ] = (__src_)[ it ] ;\</span>
<a name="l00057"></a>00057 <span class="preprocessor">                 }\</span>
<a name="l00058"></a>00058 <span class="preprocessor">                 }\</span>
<a name="l00059"></a>00059 <span class="preprocessor">                 str ;\</span>
<a name="l00060"></a>00060 <span class="preprocessor">                 })</span>
<a name="l00061"></a>00061 <span class="preprocessor"></span>
<a name="l00062"></a>00062 <span class="comment"></span>
<a name="l00063"></a>00063 <span class="comment">                /*! Abort code to sped up pattern matching. Special thanks to Lars Mathiesen &lt;thorinn@diku.dk&gt; for the ABORT code.*/</span>
<a name="l00064"></a><a class="code" href="group___n___s_t_r.html#ga79fa44855e34ba816359656e8bfd841f">00064</a> <span class="preprocessor">#define WILDMAT_ABORT -2</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span><span class="comment">                /*! What character marks an inverted character class? */</span>
<a name="l00066"></a><a class="code" href="group___n___s_t_r.html#ga868c667912754efcf68370278b0aaee1">00066</a> <span class="preprocessor">#define WILDMAT_NEGATE_CLASS &#39;^&#39;</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span><span class="comment">                /*! Do tar(1) matching rules, which ignore a trailing slash? */</span>
<a name="l00068"></a>00068 <span class="preprocessor">#undef WILDMAT_MATCH_TAR_PATTERN</span>
<a name="l00069"></a>00069 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00070"></a>00070 <span class="comment">                /*! Macro to quickly realloc a n_str */</span>
<a name="l00071"></a><a class="code" href="group___n___s_t_r.html#gaf2f56f90b51d743178d04441a81fc461">00071</a> <span class="preprocessor">#define resize_nstr( __nstr , new_size ) \</span>
<a name="l00072"></a>00072 <span class="preprocessor">                ({ \</span>
<a name="l00073"></a>00073 <span class="preprocessor">                 if( __nstr &amp;&amp; __nstr -&gt; data ) \</span>
<a name="l00074"></a>00074 <span class="preprocessor">                 { \</span>
<a name="l00075"></a>00075 <span class="preprocessor">                 Reallocz( __nstr -&gt; data , char , __nstr -&gt; length , __nstr -&gt; length + needed ); \</span>
<a name="l00076"></a>00076 <span class="preprocessor">                 __nstr -&gt; length += needed ; \</span>
<a name="l00077"></a>00077 <span class="preprocessor">                 } \</span>
<a name="l00078"></a>00078 <span class="preprocessor">                 })</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span>
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="comment"></span>
<a name="l00082"></a>00082 <span class="comment">                /*! Macro to quickly allocate and sprintf to a new char */</span>
<a name="l00083"></a><a class="code" href="group___n___s_t_r.html#ga413e4753210ae76b4231721a2354f06b">00083</a> <span class="preprocessor">#define strprintf( __n_var , ... ) \</span>
<a name="l00084"></a>00084 <span class="preprocessor">                ({ \</span>
<a name="l00085"></a>00085 <span class="preprocessor">                 if( !__n_var ) \</span>
<a name="l00086"></a>00086 <span class="preprocessor">                 { \</span>
<a name="l00087"></a>00087 <span class="preprocessor">                 NSTRBYTE needed = 0 ; \</span>
<a name="l00088"></a>00088 <span class="preprocessor">                 needed = snprintf( NULL , 0 ,  __VA_ARGS__ ); \</span>
<a name="l00089"></a>00089 <span class="preprocessor">                 Malloc( __n_var , char , needed + 2 );\</span>
<a name="l00090"></a>00090 <span class="preprocessor">                 if( __n_var )\</span>
<a name="l00091"></a>00091 <span class="preprocessor">                 { \</span>
<a name="l00092"></a>00092 <span class="preprocessor">                 snprintf( __n_var , needed + 1 , __VA_ARGS__ ); \</span>
<a name="l00093"></a>00093 <span class="preprocessor">                 } \</span>
<a name="l00094"></a>00094 <span class="preprocessor">                 } \</span>
<a name="l00095"></a>00095 <span class="preprocessor">                 else \</span>
<a name="l00096"></a>00096 <span class="preprocessor">                 { \</span>
<a name="l00097"></a>00097 <span class="preprocessor">                 n_log( LOG_ERR , &quot;%s is already allocated.&quot; , &quot;#__n_var&quot; ); \</span>
<a name="l00098"></a>00098 <span class="preprocessor">                 } \</span>
<a name="l00099"></a>00099 <span class="preprocessor">                 __n_var ; \</span>
<a name="l00100"></a>00100 <span class="preprocessor">                 })</span>
<a name="l00101"></a>00101 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00102"></a>00102 <span class="comment">                /*! Macro to quickly allocate and sprintf to an nstr */</span>
<a name="l00103"></a><a class="code" href="group___n___s_t_r.html#ga1c1f4062c727970a68bfd932c3fabcd5">00103</a> <span class="preprocessor">#define nstrprintf( __nstr_var , ... ) \</span>
<a name="l00104"></a>00104 <span class="preprocessor">                ({ \</span>
<a name="l00105"></a>00105 <span class="preprocessor">                 if( __nstr_var ) \</span>
<a name="l00106"></a>00106 <span class="preprocessor">                 { \</span>
<a name="l00107"></a>00107 <span class="preprocessor">                 free_nstr( &amp;__nstr_var ); \</span>
<a name="l00108"></a>00108 <span class="preprocessor">                 }\</span>
<a name="l00109"></a>00109 <span class="preprocessor">                 NSTRBYTE needed = 0 ; \</span>
<a name="l00110"></a>00110 <span class="preprocessor">                 needed = snprintf( NULL , 0 ,  __VA_ARGS__ ); \</span>
<a name="l00111"></a>00111 <span class="preprocessor">                 __nstr_var = new_nstr( needed + 2 ); \</span>
<a name="l00112"></a>00112 <span class="preprocessor">                 if( __nstr_var )\</span>
<a name="l00113"></a>00113 <span class="preprocessor">                 { \</span>
<a name="l00114"></a>00114 <span class="preprocessor">                 snprintf( __nstr_var -&gt; data , needed + 1 , __VA_ARGS__ ); \</span>
<a name="l00115"></a>00115 <span class="preprocessor">                 __nstr_var -&gt; written = needed ; \</span>
<a name="l00116"></a>00116 <span class="preprocessor">                 } \</span>
<a name="l00117"></a>00117 <span class="preprocessor">                 __nstr_var ; \</span>
<a name="l00118"></a>00118 <span class="preprocessor">                 })</span>
<a name="l00119"></a>00119 <span class="preprocessor"></span>
<a name="l00120"></a>00120 <span class="comment"></span>
<a name="l00121"></a>00121 <span class="comment">                /*! Macro to quickly allocate and sprintf-cat to an nstr */</span>
<a name="l00122"></a><a class="code" href="group___n___s_t_r.html#gad0cfa38dd5915341138cdfce6d17e01f">00122</a> <span class="preprocessor">#define nstrprintf_cat( __nstr_var , ... ) \</span>
<a name="l00123"></a>00123 <span class="preprocessor">                ({ \</span>
<a name="l00124"></a>00124 <span class="preprocessor">                 if( __nstr_var ) \</span>
<a name="l00125"></a>00125 <span class="preprocessor">                 { \</span>
<a name="l00126"></a>00126 <span class="preprocessor">                 NSTRBYTE needed = 0 ; \</span>
<a name="l00127"></a>00127 <span class="preprocessor">                 needed = snprintf( NULL , 0 ,  __VA_ARGS__ ); \</span>
<a name="l00128"></a>00128 <span class="preprocessor">                 if( ( __nstr_var -&gt; written + needed ) &gt;= __nstr_var -&gt; length ) \</span>
<a name="l00129"></a>00129 <span class="preprocessor">                 { \</span>
<a name="l00130"></a>00130 <span class="preprocessor">                 resize_nstr( __nstr_var , __nstr_var -&gt; length + needed + 2 ); \</span>
<a name="l00131"></a>00131 <span class="preprocessor">                 } \</span>
<a name="l00132"></a>00132 <span class="preprocessor">                 snprintf( __nstr_var -&gt; data + __nstr_var -&gt; written , needed + 1 , __VA_ARGS__ ); \</span>
<a name="l00133"></a>00133 <span class="preprocessor">                 __nstr_var -&gt; written += needed ; \</span>
<a name="l00134"></a>00134 <span class="preprocessor">                 } \</span>
<a name="l00135"></a>00135 <span class="preprocessor">                 else \</span>
<a name="l00136"></a>00136 <span class="preprocessor">                 { \</span>
<a name="l00137"></a>00137 <span class="preprocessor">                 nstrprintf( __nstr_var , __VA_ARGS__ ); \</span>
<a name="l00138"></a>00138 <span class="preprocessor">                 } \</span>
<a name="l00139"></a>00139 <span class="preprocessor">                 __nstr_var ; \</span>
<a name="l00140"></a>00140 <span class="preprocessor">                 } )</span>
<a name="l00141"></a>00141 <span class="preprocessor"></span>
<a name="l00142"></a>00142 
<a name="l00143"></a>00143 <span class="preprocessor">#if defined(LINUX) || defined(SOLARIS)</span>
<a name="l00144"></a>00144 <span class="preprocessor"></span><span class="preprocessor">#include &lt;inttypes.h&gt;</span><span class="comment"></span>
<a name="l00145"></a>00145 <span class="comment">                /*! N_STR base unit */</span>
<a name="l00146"></a>00146                 <span class="keyword">typedef</span> int32_t <a class="code" href="group___n___s_t_r.html#ga3a7cee2a87677e4013453c4b1dd28592">NSTRBYTE</a>;
<a name="l00147"></a>00147 <span class="preprocessor">#else</span>
<a name="l00148"></a>00148 <span class="preprocessor"></span><span class="comment">                /*! N_STR base unit */</span>
<a name="l00149"></a><a class="code" href="group___n___s_t_r.html#ga3a7cee2a87677e4013453c4b1dd28592">00149</a>                 <span class="keyword">typedef</span> __int32 <a class="code" href="group___n___s_t_r.html#ga3a7cee2a87677e4013453c4b1dd28592">NSTRBYTE</a>;
<a name="l00150"></a>00150 <span class="preprocessor">#endif</span>
<a name="l00151"></a>00151 <span class="preprocessor"></span><span class="comment">                /*! A double linked box including a string and his lenght */</span>
<a name="l00152"></a><a class="code" href="struct_n___s_t_r.html">00152</a>                 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="struct_n___s_t_r.html">N_STR</a>
<a name="l00153"></a>00153                 {<span class="comment"></span>
<a name="l00154"></a>00154 <span class="comment">                                /*! the string */</span>
<a name="l00155"></a><a class="code" href="struct_n___s_t_r.html#a91a70b77df95bd8b0830b49a094c2acb">00155</a>                                 <span class="keywordtype">char</span> *<a class="code" href="struct_n___s_t_r.html#a91a70b77df95bd8b0830b49a094c2acb">data</a>;<span class="comment"></span>
<a name="l00156"></a>00156 <span class="comment">                                /*! length of string (in case we wanna keep information after the 0 end of string value) */</span>
<a name="l00157"></a><a class="code" href="struct_n___s_t_r.html#af94035ceafa86d9fa8add2edebdbc62b">00157</a>                                 NSTRBYTE <a class="code" href="struct_n___s_t_r.html#af94035ceafa86d9fa8add2edebdbc62b">length</a> ;<span class="comment"></span>
<a name="l00158"></a>00158 <span class="comment">                                /*! size of the written data inside the string */</span>
<a name="l00159"></a><a class="code" href="struct_n___s_t_r.html#abf7c0d7ee61a7487629488d05d0f7fa1">00159</a>                                 NSTRBYTE <a class="code" href="struct_n___s_t_r.html#abf7c0d7ee61a7487629488d05d0f7fa1">written</a> ;          
<a name="l00160"></a>00160                 } <a class="code" href="group___n___s_t_r.html#ga5444ba839203a1cd639a1a8de7b9d7f5">N_STR</a>;
<a name="l00161"></a>00161 
<a name="l00162"></a>00162                 <span class="comment">/* trim and zero end the string, WARNING: keep and original pointer to delete the string correctly */</span> 
<a name="l00163"></a>00163                 <span class="keywordtype">char</span> *<a class="code" href="group___n___s_t_r.html#gaca10c15094ab4f8855b77ef097f34472" title="trim and zero end the string, WARNING: keep and original pointer to delete the string correctly...">trim_nocopy</a>(<span class="keywordtype">char</span> *s);
<a name="l00164"></a>00164 
<a name="l00165"></a>00165                 <span class="comment">/* fgets in a NSTR */</span> 
<a name="l00166"></a>00166                 <span class="keywordtype">char</span> *<a class="code" href="group___n___s_t_r.html#gac12f9fc8fdd7777ccf225c3a95376379" title="try to fgets until new line">nfgets</a>( <span class="keywordtype">char</span> *buffer , <span class="keywordtype">int</span> size , FILE *stream );
<a name="l00167"></a>00167 
<a name="l00168"></a>00168                 <span class="comment">/* create a new string */</span>
<a name="l00169"></a>00169                 <a class="code" href="struct_n___s_t_r.html">N_STR</a> *<a class="code" href="group___n___s_t_r.html#ga8a95056dbf0c077a75318fa57c51c964" title="create a new N_STR string">new_nstr</a>( NSTRBYTE size );   
<a name="l00170"></a>00170                 <span class="comment">/* reinitialize a nstr */</span>
<a name="l00171"></a>00171                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga7b1c84d10757d1886ed29938f1f65973" title="empty a N_STR string">empty_nstr</a>( <a class="code" href="struct_n___s_t_r.html">N_STR</a> *nstr ); 
<a name="l00172"></a>00172                 <span class="comment">/* Make a copy of a N_STR */</span>
<a name="l00173"></a>00173                 <a class="code" href="struct_n___s_t_r.html">N_STR</a> *<a class="code" href="group___n___s_t_r.html#gab9f1902d941f4f847a1063fd6fedd1f2" title="Duplicate a N_STR.">nstrdup</a>( <a class="code" href="struct_n___s_t_r.html">N_STR</a> *msg );
<a name="l00174"></a>00174                 <span class="comment">/* Convert a char into a N_STR */</span>
<a name="l00175"></a>00175                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gaeb714633f5a20c9e90ea62c9f0a7864c" title="Convert a char into a N_STR, extended version.">char_to_nstr_ex</a>( <span class="keywordtype">char</span> *from , NSTRBYTE nboct , <a class="code" href="struct_n___s_t_r.html">N_STR</a> **to );
<a name="l00176"></a>00176                 <span class="comment">/* Convert a char into a N_STR, shorter version */</span>
<a name="l00177"></a>00177                 <a class="code" href="struct_n___s_t_r.html">N_STR</a> *<a class="code" href="group___n___s_t_r.html#ga774aea1d21b0b4d94cb4e4c5fdb1bbd2" title="Convert a char into a N_STR, short version.">char_to_nstr</a>( <span class="keywordtype">char</span> *src );
<a name="l00178"></a>00178                 <span class="comment">/* cat data inside a N8STR */</span>
<a name="l00179"></a>00179                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gae7327b1afe9e61cff503e8eecc2e9fe7" title="Append data into N_STR using internal N_STR size and cursor position.">nstrcat_ex</a>( <a class="code" href="struct_n___s_t_r.html">N_STR</a> *dest , <span class="keywordtype">void</span> *src , NSTRBYTE size , NSTRBYTE blk_size ,<span class="keywordtype">int</span> resize_flag );
<a name="l00180"></a>00180                 <span class="comment">/* Wrapper to nstrcat_ex to concatenate N_STR *datas */</span>
<a name="l00181"></a>00181                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga092e6ee522715bd6b3664dbd1081c3a3" title="Add N_STR *src content to N_STR *dst, resizing it if needed.">nstrcat</a>( <a class="code" href="struct_n___s_t_r.html">N_STR</a> *dst , <a class="code" href="struct_n___s_t_r.html">N_STR</a> *src );
<a name="l00182"></a>00182                 <span class="comment">/* Wrapper to nstrcat_ex to concatenate void *data */</span>
<a name="l00183"></a>00183                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga4e862f3b3b1b0f04d0cc455a3f260e15" title="Append data into N_STR using internal N_STR size and cursor position. Wrapper to nstrcat_ex, with resize_flag on and a block size one byte higher than size.">nstrcat_bytes_ex</a>( <a class="code" href="struct_n___s_t_r.html">N_STR</a> *dest , <span class="keywordtype">void</span> *src , NSTRBYTE size );
<a name="l00184"></a>00184                 <span class="comment">/* Wrapper to nstrcat_bytes_ex to cat null termined data streams */</span>
<a name="l00185"></a>00185                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga50dd2820bb9517359112b24abb187801" title="Append data into N_STR using internal N_STR size and cursor position. Wrapper to nstrcat_ex, with resize_flag on and a block size one byte higher than size.">nstrcat_bytes</a>( <a class="code" href="struct_n___s_t_r.html">N_STR</a> *dest , <span class="keywordtype">void</span> *src );
<a name="l00186"></a>00186                 <span class="comment">/* Load a whole file into a N_STR. Be aware of the (4GB ||System Memory) limit */</span>
<a name="l00187"></a>00187                 <a class="code" href="struct_n___s_t_r.html">N_STR</a> *<a class="code" href="group___n___s_t_r.html#gac4df24f1f827403f17016f5eea77ed80" title="Load a whole file into a N_STR. Be aware of the NSTRBYTE addressing limit (2GB commonly)">file_to_nstr</a>( <span class="keywordtype">char</span> *filename );
<a name="l00188"></a>00188                 <span class="comment">/* Write a whole N_STR into an open file descriptor */</span>
<a name="l00189"></a>00189                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gaf1ad6fe037290fd52fb91b89dd978b1f" title="Write a N_STR content into a file.">nstr_to_fd</a>( <a class="code" href="struct_n___s_t_r.html">N_STR</a> *str , FILE *out , <span class="keywordtype">int</span> lock );
<a name="l00190"></a>00190                 <span class="comment">/* Write a whole N_STR into a file */</span>
<a name="l00191"></a>00191                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga287229f34095426806d36c86be764d12" title="Write a N_STR content into a file.">nstr_to_file</a>( <a class="code" href="struct_n___s_t_r.html">N_STR</a> *n_str , <span class="keywordtype">char</span> *filename );
<a name="l00192"></a>00192 <span class="comment"></span>
<a name="l00193"></a>00193 <span class="comment">                /*!\fn free_nstr( __ptr )</span>
<a name="l00194"></a>00194 <span class="comment">                 *\brief Free a N_STR structure and set the pointer to NULL</span>
<a name="l00195"></a>00195 <span class="comment">                 *\param __ptr A N_STR *object to free</span>
<a name="l00196"></a>00196 <span class="comment">                 *\return TRUE or FALSE</span>
<a name="l00197"></a>00197 <span class="comment">                 */</span>
<a name="l00198"></a><a class="code" href="group___n___s_t_r.html#gaf12ed8f24027146ce65b5511dca95316">00198</a> <span class="preprocessor">#define free_nstr( __ptr ) \</span>
<a name="l00199"></a>00199 <span class="preprocessor">                { \</span>
<a name="l00200"></a>00200 <span class="preprocessor">                                if( (*__ptr ) ) \</span>
<a name="l00201"></a>00201 <span class="preprocessor">                                { \</span>
<a name="l00202"></a>00202 <span class="preprocessor">                                                _free_nstr( __ptr ); \</span>
<a name="l00203"></a>00203 <span class="preprocessor">                                } \</span>
<a name="l00204"></a>00204 <span class="preprocessor">                                else \</span>
<a name="l00205"></a>00205 <span class="preprocessor">                                { \</span>
<a name="l00206"></a>00206 <span class="preprocessor">                                                n_log( LOG_DEBUG , &quot;%s is already NULL&quot; , #__ptr ); \</span>
<a name="l00207"></a>00207 <span class="preprocessor">                                } \</span>
<a name="l00208"></a>00208 <span class="preprocessor">                }</span>
<a name="l00209"></a>00209 <span class="preprocessor"></span>
<a name="l00210"></a>00210 
<a name="l00211"></a>00211                 <span class="comment">/* free NSTR and set it to NULL */</span>
<a name="l00212"></a>00212                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gaca4a7a2dfa962f043cb8f3762ce28761" title="Free a N_STR structure and set the pointer to NULL.">_free_nstr</a>( <a class="code" href="struct_n___s_t_r.html">N_STR</a> **ptr );
<a name="l00213"></a>00213                 <span class="comment">/* just free NSTR */</span> 
<a name="l00214"></a>00214                 <span class="keywordtype">void</span> <a class="code" href="group___n___s_t_r.html#ga0a864a4ce4997389f2e5e2e16c51a30a" title="Free a N_STR pointer structure.">free_nstr_ptr</a>( <span class="keywordtype">void</span> *ptr );
<a name="l00215"></a>00215                 <span class="comment">/* Do not warn and Free + set to NULL */</span>
<a name="l00216"></a>00216                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gabd313699b10bb56e50c45670e479faa7" title="Free a N_STR structure and set the pointer to NULL.">free_nstr_nolog</a>( <a class="code" href="struct_n___s_t_r.html">N_STR</a> **ptr );
<a name="l00217"></a>00217                 <span class="comment">/* Do not warn and just Free */</span>
<a name="l00218"></a>00218                 <span class="keywordtype">void</span> <a class="code" href="group___n___s_t_r.html#gae1af929354e55057c4f134bce8f5b4d6" title="Free a N_STR pointer structure.">free_nstr_ptr_nolog</a>( <span class="keywordtype">void</span> *ptr );
<a name="l00219"></a>00219 
<a name="l00220"></a>00220                 <span class="comment">/* String to long integer, with error checking */</span>
<a name="l00221"></a>00221                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gaf2fb09488bdaa0e8662f639ea899627e" title="Helper for string[start to end] to integer. Automatically add /0 for conversion. Leave values untouch...">str_to_long_ex</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *s , NSTRBYTE start , NSTRBYTE end , <span class="keywordtype">long</span> <span class="keywordtype">int</span> *i, <span class="keyword">const</span> <span class="keywordtype">int</span> base );
<a name="l00222"></a>00222                 <span class="comment">/* String to long integer, shorter version */</span> 
<a name="l00223"></a>00223                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gabe0231d30f0adca6678adba9ffca328a" title="Helper for string to integer.">str_to_long</a>(  <span class="keyword">const</span> <span class="keywordtype">char</span> *s , <span class="keywordtype">long</span> <span class="keywordtype">int</span> *i,  <span class="keyword">const</span> <span class="keywordtype">int</span> base);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225                 <span class="comment">/* String to integer, with error checking */</span>
<a name="l00226"></a>00226                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga55fdc7d1a7bd05f3e3925486e7fc9b9d" title="Helper for string[start to end] to integer. Automatically add /0 for conversion. Leave values untouch...">str_to_int_ex</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *s , NSTRBYTE start , NSTRBYTE end , <span class="keywordtype">int</span> *i, <span class="keyword">const</span> <span class="keywordtype">int</span> base );
<a name="l00227"></a>00227                 <span class="comment">/* String to integer, with error checking */</span>
<a name="l00228"></a>00228                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga62422c326112e425298de6fb92584067" title="Helper for string[start to end] to integer. Automatically add /0 for conversion. Leave values untouch...">str_to_int_nolog</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *s , NSTRBYTE start , NSTRBYTE end , <span class="keywordtype">int</span> *i, <span class="keyword">const</span> <span class="keywordtype">int</span> base , <a class="code" href="struct_n___s_t_r.html">N_STR</a> **infos );
<a name="l00229"></a>00229                 <span class="comment">/* String to integer, shorter version */</span> 
<a name="l00230"></a>00230                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gae2c2238ae654a58f23570ce58e4d0eb8" title="Helper for string to integer.">str_to_int</a>(  <span class="keyword">const</span> <span class="keywordtype">char</span> *s , <span class="keywordtype">int</span> *i,  <span class="keyword">const</span> <span class="keywordtype">int</span> base);
<a name="l00231"></a>00231 
<a name="l00232"></a>00232                 <span class="comment">/* Skip character from string while string[iterator] == toskip step inc */</span>
<a name="l00233"></a>00233                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga783070a793146a860c3651c8434f32e1" title="skip while &amp;#39;toskip&amp;#39; occurence is found from &amp;#39;iterator&amp;#39; to the next non &amp;#39;toskip&amp;#3...">skipw</a>( <span class="keywordtype">char</span> *<span class="keywordtype">string</span> , <span class="keywordtype">char</span> toskip , NSTRBYTE *iterator , <span class="keywordtype">int</span> inc );
<a name="l00234"></a>00234                 <span class="comment">/* Skip character from string until string[iterator] == toskip step inc */</span>
<a name="l00235"></a>00235                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gae4317ddc09606fcca46265a53bfbfb8b" title="skip until &amp;#39;toskip&amp;#39; occurence is found from &amp;#39;iterator&amp;#39; to the next &amp;#39;toskip&amp;#39; v...">skipu</a>( <span class="keywordtype">char</span> *<span class="keywordtype">string</span> , <span class="keywordtype">char</span> toskip , NSTRBYTE *iterator , <span class="keywordtype">int</span> inc );
<a name="l00236"></a>00236                 <span class="comment">/* Upper case a string */</span>
<a name="l00237"></a>00237                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gabb57d0188e78f2520d4ae7cc805579f5" title="Upper case a string.">strup</a>( <span class="keywordtype">char</span> *<span class="keywordtype">string</span> , <span class="keywordtype">char</span> *dest );
<a name="l00238"></a>00238                 <span class="comment">/* Lower case a string */</span>
<a name="l00239"></a>00239                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gaeaf9add3ea7a87eeea6e0cc4a81b47e6" title="Upper case a string.">strlo</a>( <span class="keywordtype">char</span> *<span class="keywordtype">string</span> , <span class="keywordtype">char</span> *dest );
<a name="l00240"></a>00240                 <span class="comment">/* Copy from string to dest until from[ iterator ] == split */</span>
<a name="l00241"></a>00241                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga0484a44a99d2ad895e2c111b34ea5e39" title="Copy from start to dest until from[ iterator ] == split.">strcpy_u</a>( <span class="keywordtype">char</span> *from , <span class="keywordtype">char</span> *to , NSTRBYTE to_size , <span class="keywordtype">char</span> <a class="code" href="group___n___s_t_r.html#ga13225fa38291ca9b70a669f34d266de1" title="Split the strings into a an array of char *pointer , ended by a NULL one. Max 256 splitted elements p...">split</a> , NSTRBYTE *it );
<a name="l00242"></a>00242                 <span class="comment">/* Return an array of char pointer to the splitted section */</span>
<a name="l00243"></a>00243                 <span class="keywordtype">char</span> **<a class="code" href="group___n___s_t_r.html#ga13225fa38291ca9b70a669f34d266de1" title="Split the strings into a an array of char *pointer , ended by a NULL one. Max 256 splitted elements p...">split</a>( <span class="keywordtype">char</span>* chaine , <span class="keyword">const</span> <span class="keywordtype">char</span>* delim , <span class="keywordtype">int</span> vide );
<a name="l00244"></a>00244                 <span class="comment">/* Count split elements */</span>
<a name="l00245"></a>00245                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga194b81c0709d24aef9b6f7e8635d3966" title="Count split elements.">split_count</a>( <span class="keywordtype">char</span> **split_result );
<a name="l00246"></a>00246                 <span class="comment">/* Free a char **tab and set it to NULL */</span>
<a name="l00247"></a>00247                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gad53cff99261e509872a2a4128b1265cf" title="Free a split result allocated array.">free_split_result</a>( <span class="keywordtype">char</span> ***tab );
<a name="l00248"></a>00248                 <span class="comment">/* Write and fit into the char array */</span>
<a name="l00249"></a>00249                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gaf871f697487843d865b54ecd8cfd44a3">write_and_fit</a>( <span class="keywordtype">char</span> **dest , NSTRBYTE *size , NSTRBYTE *written , <span class="keywordtype">char</span> *src );
<a name="l00250"></a>00250                 <span class="comment">/* get a list of the file in a directory */</span>
<a name="l00251"></a>00251                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gaa3becc1e523b47d5d53bbbf6b1603520" title="Scan a list of directory and return a list of char *file.">scan_dir</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *dir, <a class="code" href="struct_l_i_s_t.html">LIST</a> *result , <span class="keyword">const</span> <span class="keywordtype">int</span> recurse );
<a name="l00252"></a>00252                 <span class="comment">/* get a list of the file in a directory, extented N_STR version */</span>
<a name="l00253"></a>00253                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga3257ab0fdf5a36d0dfca480a161d9fbf" title="Scan a list of directory and return a list of char *file.">scan_dir_ex</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *dir, <span class="keyword">const</span> <span class="keywordtype">char</span> *pattern , <a class="code" href="struct_l_i_s_t.html">LIST</a> *result , <span class="keyword">const</span> <span class="keywordtype">int</span> recurse , <span class="keyword">const</span> <span class="keywordtype">int</span> mode );
<a name="l00254"></a>00254                 <span class="comment">/* pattern matching */</span>
<a name="l00255"></a>00255                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gabcfef0711183d5a9eb5ccb9c72ccaf85" title="Written by Rich Salz rsalz at osf.org, refurbished by me. Wildcard pattern matching ...">wildmat</a>( <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *text, <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *p );
<a name="l00256"></a>00256                 <span class="comment">/* pattern matching case insensitive */</span>
<a name="l00257"></a>00257                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga83b7c5c99476048f972ead97468ab7c2" title="Written by Rich Salz rsalz at osf.org, refurbished by me. Wildcard pattern matching case insensitive...">wildmatcase</a>( <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *text, <span class="keyword">register</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *p );
<a name="l00258"></a>00258 
<a name="l00259"></a>00259                 <span class="comment">/* return a replaced string */</span>
<a name="l00260"></a>00260                 <span class="keywordtype">char</span> *<a class="code" href="group___n___s_t_r.html#ga092a90f5b304c37c75a3a2f1202c843e" title="Replace &amp;quot;substr&amp;quot; by &amp;quot;replacement&amp;quot; inside string taken from http://coding.debuntu.org/c-implementing-str_replace-replace-all-occurrences-substring By Chantra.">str_replace</a> ( <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">string</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *substr, <span class="keyword">const</span> <span class="keywordtype">char</span> *replacement );
<a name="l00261"></a>00261 
<a name="l00262"></a>00262                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#ga12eb2a9cc29426d29ae3b650f6c8174b" title="clean a string by replacing evil characteres">str_sanitize_ex</a>( <span class="keywordtype">char</span> *<span class="keywordtype">string</span>, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> string_len, <span class="keyword">const</span> <span class="keywordtype">char</span> *mask, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> masklen, <span class="keyword">const</span> <span class="keywordtype">char</span> replacement );
<a name="l00263"></a>00263 
<a name="l00264"></a>00264                 <span class="comment">/* in-place substitution of a set of chars by a single one */</span>
<a name="l00265"></a>00265                 <span class="keywordtype">int</span> <a class="code" href="group___n___s_t_r.html#gaaf432cb6330353e306e51ed3d6e9f417" title="clean a string by replacing evil characteres">str_sanitize</a>( <span class="keywordtype">char</span> *<span class="keywordtype">string</span>, <span class="keyword">const</span> <span class="keywordtype">char</span> *mask, <span class="keyword">const</span> <span class="keywordtype">char</span> replacement );
<a name="l00266"></a>00266 <span class="comment"></span>
<a name="l00267"></a>00267 <span class="comment">                /*@}*/</span>
<a name="l00268"></a>00268 <span class="preprocessor">#ifdef __cplusplus</span>
<a name="l00269"></a>00269 <span class="preprocessor"></span>}
<a name="l00270"></a>00270 <span class="preprocessor">#endif</span>
<a name="l00271"></a>00271 <span class="preprocessor"></span><span class="comment">/* #ifndef N_STR*/</span>
<a name="l00272"></a>00272 <span class="preprocessor">#endif </span>
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Fri Oct 19 2018 10:35:44 for Nilorea Library by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
